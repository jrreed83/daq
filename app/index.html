<html>
    <head>
        <link href="styles.css" rel="stylesheet">
    </head>
    <body>
        <div id="app">
            <header id="header">
                <h1 class="title"> Chart </h1>
            </header>
            <section id="chart">
                <canvas height="300" width="1000"></canvas>
            </section>
        </div>

        <script>

            Array.prototype.downSample = function(n) {
                const out = [];
                for (let i=0; i< this.length; i++) {
                    if (i % n === 0) {
                        out.push(this[i]);
                    }
                }
                return out;
            };

            const canvas = document.querySelector('canvas')
            const {height, width} = canvas;
            const ctx = canvas.getContext('2d');

            function linearMapping(domain, range) {
                const [x0, x1] = domain;
                const [y0, y1] = range;
                return function(x) {
                    const m = (y1 - y0) / (x1 - x0);
                    const b = y0 - m*x0;
                    const y = m * x + b;
                    return y;
                }
            }

            // Canvas margin 
            const margin = {
                l: 30,
                t: 30,
                r: 30,
                b: 30,
            }   

            const l = margin.l;
            const r = width - margin.r;
            const t = margin.t;
            const b = height-margin.b;
            const xScale = linearMapping([0 ,100], [l, r]);
            const yScale = linearMapping([-1,1], [b, t]);


            // x-axis
            ctx.beginPath();
            ctx.lineWidth=1;            
            ctx.moveTo(margin.l,height-margin.b);
            ctx.lineTo(width, height-margin.b);
            ctx.stroke();

            // x-axis labels
            ctx.font = '1rem Consolas';
            const xlabels = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
            xlabels.forEach( l => { 
                ctx.fillText(`${l}`, xScale(l), height-margin.b+16);        
            })

            // y-axis
            ctx.beginPath();
            ctx.lineWidth=1;              
            ctx.moveTo(margin.l,margin.t);
            ctx.lineTo(margin.l, height-margin.b);
            ctx.stroke();

            // x-axis labels
            ctx.font = '1rem Consolas';
            const ylabels = [-1, 0, 1];
            ylabels.forEach( l => { 
                ctx.fillText(`${l}`, 8, yScale(l)+1);        
            })

            // signal
            const fs = 1000;
            const fc = 50;
            const n  = 100;
            ctx.lineCap  = 'round';  
            ctx.lineJoin = 'round';
            ctx.strokeStyle = 'teal';
            ctx.lineWidth=2;
            
            
            ctx.beginPath();
            ctx.moveTo(xScale(0), yScale(0));
            for (let i=1; i < n; i++) {
                const x = i;
                const y = Math.sin(2 * Math.PI * (fc / fs) * i);
                ctx.lineTo(xScale(x), yScale(y));  
            }
            ctx.stroke();            
        </script>
    </body>
</html>