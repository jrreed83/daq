<html>
    <head>
        <link href="styles.css" rel="stylesheet">
    </head>
    <body>
        <div id="app">
            <header id="header">
                <h1 class="title"> Chart </h1>
            </header>
            <div id="main">
                <div id="chart">
                    <svg id="axes" height="300" width="700"></svg>
                    <canvas></canvas>
                </div>            
            </div>

        </div>

        <script>

            Array.prototype.downSample = function(n) {
                const out = [];
                for (let i=0; i< this.length; i++) {
                    if (i % n === 0) {
                        out.push(this[i]);
                    }
                }
                return out;
            };

            // Canvas margin 
            const margin = {
                l: 30,
                t: 30,
                r: 30,
                b: 30,
            };          

            const canvas  = document.querySelector('canvas');
            canvas.height = 300 - margin.t - margin.b;
            canvas.width  = 700 - margin.l - margin.r;
            canvas.style  = `top: ${margin.t}; left: ${margin.l}`;
            
            const {height, width} = canvas;
            const ctx = canvas.getContext('2d');

            function linearMapping(domain, range) {
                const [x0, x1] = domain;
                const [y0, y1] = range;
                return function(x) {
                    const m = (y1 - y0) / (x1 - x0);
                    const b = y0 - m*x0;
                    const y = m * x + b;
                    return y;
                }
            }

  

            const l = margin.l;
            const r = width - margin.r;
            const t = margin.t;
            const b = height-margin.b;
            const xScale = linearMapping([0 ,100], [l, r]);
            const yScale = linearMapping([-1,1], [b, t]);


            // signal
            const fs = 1000;
            const fc = 50;
            const n  = 100;
            ctx.lineCap  = 'round';  
            ctx.lineJoin = 'round';
            ctx.strokeStyle = 'teal';
            ctx.lineWidth=2;
            
            
            ctx.beginPath();
            ctx.moveTo(xScale(0), yScale(0));
            for (let i=1; i < n; i++) {
                const x = i;
                const y = Math.sin(2 * Math.PI * (fc / fs) * i);
                ctx.lineTo(xScale(x), yScale(y));  
            }
            ctx.stroke();            
        </script>
    </body>
</html>